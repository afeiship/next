!function(){var a,r,i,o,e,s,n,_,c,u,f,p,t="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,t=t||l||Function("return this")(),l="object"==typeof exports&&exports&&!exports.nodeType&&exports,h=l&&"object"==typeof module&&module&&!module.nodeType&&module,y=t.nx=t.nx||{BREAKER:{},NIL:{},VERSION:"1.2.11",DEBUG:!1,GLOBAL:t};function d(t){return t.toString().replace(n,".$1").replace(_,a).replace(c,"")}function b(){}function m(t,e){this.type=t,this.meta=e,this.base=e.extends||y.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.nx=y,define(function(){return y})):h?((h.exports=y).nx=y,l.nx=y):t.nx=y,a=".",r="number",i="undefined",o=Array.prototype,e=Object.prototype.toString,s=Object.prototype.hasOwnProperty,n=/\[(\w+)\]/g,_=/[.]+/g,c=/^\.|\.$/g,y.noop=function(){},y.typeof=function(t){return null==t||"object"!=typeof t?null===t?"null":void 0===t?"undefined":typeof t:e.call(t).slice(8,-1).toLowerCase()},y.stubTrue=function(){return!0},y.stubFalse=function(){return!1},y.stubValue=function(t){return t},y.stubPromise=function(t){return void 0===t?Promise.resolve():Promise.resolve(t)},y.isBoolean=function(t){return"boolean"==typeof t},y.isString=function(t){return"string"==typeof t},y.isNumber=function(t){return typeof t==r&&!isNaN(t)},y.isNaN=function(t){return isNaN(t)},y.isFunction=function(t){return"function"==typeof t},y.isNil=function(t){return null==t},y.isArray=function(t){return Array.isArray(t)},y.isObject=function(t){return!Array.isArray(t)&&"object"==typeof t&&null!==t},y.isThenable=function(t){return!!t&&"object"==typeof t&&"function"==typeof t.then},y.error=function(t){throw new Error(t)},y.try=function(t,e){e=e||y.noop;try{t()}catch(t){e(t)}},y.forEach=function(t,e,n){for(var o=t.length,i=0;i<o&&e.call(n,t[i],i,t)!==y.BREAKER;i++);},y.forIn=function(t,e,n){for(var o in t)if(s.call(t,o)&&e.call(n,o,t[o],t)===y.BREAKER)break},y.each=function(o,i,_){function t(t,e,n){return i.call(_,t,e,o,n)===y.BREAKER}var e,n;if(o)if(typeof(n=o.length)==r)for(e=0;e<n&&!t(e,o[e],!0);e++);else for(e in o)if(s.call(o,e)&&t(e,o[e],!1))break},y.map=function(t,e,n){var o=[];return y.each(t,function(){var t=e.apply(n,arguments);if(t===y.BREAKER)return y.BREAKER;o.push(t)}),o},y.mix=function(t){for(var n=t||{},e=arguments,o=1,i=e.length;o<i;o++)y.forIn(e[o],function(t,e){n[t]=e});return n},y.slice=function(t,e,n){return o.slice.call(t,e,n)},y.set=function(t,e,n){for(var o=d(e).split(a),i=t||y.GLOBAL,_=o.length-1,e=o[_],r=0;r<_;r++)var s=o[r],c=isNaN(+o[r+1])?{}:[],i=i[s]=i[s]||c;return i[e]=n,t},y.get=function(t,e,n){var o;return e?(e=d(e).split(a),o=t||y.GLOBAL,e.forEach(function(t){o=o&&o[t]}),typeof n!=i&&typeof o==i?n:o):t},y.del=function(t,e){for(var n=d(e).split(a),o=0;o<n.length;o++){var i=n[o];if(o===n.length-1)return null!=t&&("object"==typeof t&&delete t[i],!0);t=t[i]}return!1},y.to=function(t){return t.then(function(t){return[void 0,t]}).catch(function(t){return[t,void 0]})},y.createOverload=function(){var o={};function t(){var t=y.slice(arguments),e=t.map(y.typeof).join(),n=o[t.length]||o[e];if(n)return n.apply(this,t);throw new Error("No matching function, parameter type: ["+e+"]")}return t.add=function(t){var e=t.args,t=t.fn,e=Array.isArray(e)?e.join():e;if("function"!=typeof t)throw new Error("The fn must be a function");o[e]=t},t},(h={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:y.noop,__static_init__:y.noop}).__methods__=b.prototype=y.mix({constructor:b,init:y.noop,destroy:y.noop,toString:function(){return"[Class@"+this.__type__+"]"}},l={base:function(){var t=this.base.caller;if(t&&(t=t.__base__))return t.apply(this,arguments)},parent:function(t){var e=void 0===this.__id__,n=y.slice(arguments,1),o=e?this.__base__:this.__base__.prototype,e=this["@"+t].__type__,i=["get","set"][n.length];switch(e){case"method":return o[t].apply(this,n);case"property":return o["@"+t][i].apply(this,n)}}}),y.mix(h.__statics__,l),y.mix(b,h),y.mix(b,h.__statics__),y.RootClass=b,y.defineProperty=function(t,e,n,o){var i,_,r,s="@"+e,c=n&&"object"==typeof n?n:{value:n},c="value"in c?(_=c.value,r="_"+e,i=function(){return r in this?this[r]:y.isFunction(_)?_.call(this):_},function(t){this[r]=t}):(i=n.get||t[s]&&t[s].get||y.noop,n.set||t[s]&&t[s].set||y.noop);return s in t&&(i.__base__=t[s].get,c.__base__=t[s].set),s=t[s]={__meta__:n,__name__:e,__type__:"property",__static__:!!o,get:i,set:c,configurable:!0},Object.defineProperty(t,e,s),s},y.defineMethod=function(t,e,n,o){var i="@"+e;return t[e]=n,t[i]={__meta__:n,__name__:e,__type__:"method",__static__:!!o}},y.defineBombMethod=function(n,t,o,i){t.split(",").forEach(function(t,e){y.defineMethod(n,t,o.call(n,t,e),i)})},y.defineMembers=function(n,o,t,i){y.forIn(t,function(t,e){-1<t.indexOf(",")?y.defineBombMethod(o,t,e,i):y["define"+n](o,t,e,i)})},u=1,f=0,p="nx.Anonymous",m.prototype={constructor:m,initMetaProcessor:function(){var t=this.meta,e=t.methods||{};y.mix(this.__class_meta__,{__type__:this.type,__meta__:t,__base__:this.base,__class_id__:u++,__method_init__:e.init||this.base.__method_init__,__static_init__:(t.statics||{}).init||this.base.__static_init__,__static__:!t.methods&&!!t.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=f++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){function e(){}var n=this.__class__;e.prototype=this.$base,n.prototype=new e,n.prototype.$base=this.$base,n.prototype.constructor=n},defineMethods:function(t,e){var n=e?"statics":"methods",o="__"+n+"__",i=e?this.__class__:this.__class__.prototype,_=(e?this.base:this.base.prototype)[o]||{};y.forIn(this.meta[n],function(t,e){_[t]&&"function"==typeof e&&(e.__base__=_[t])}),i[o]=y.mix(t[o],_,this.meta[n]),y.defineMembers("Method",i,i[o],e)},defineProperties:function(t){var e=t.__static__,n=e?this.__class__:this.__class__.prototype,o=e?this.base:this.base.prototype;n.__properties__=y.mix(null,o.__properties__,t.__properties__,this.meta.properties),y.defineMembers("Property",n,n.__properties__,e)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,e=this.type,n=this.__class_meta__;y.mix(t.prototype,n),y.mix(t,n),-1===e.indexOf(p)&&y.set(y.GLOBAL,e,t)},registerDebug:function(t){y.DEBUG&&(y.set(y,"__instances__."+(f-1),t),y.set(y,"__instances__.length",f))}},y.declare=function(t,e){e=new m("string"==typeof t?t:p+u,e||t);return e.initMetaProcessor(),e.createClassProcessor(),e.inheritProcessor(),e.methodsConstructorProcessor(),e.staticsConstructorProcessor(),e.registerProcessor(),e.__class__}}.call(this);