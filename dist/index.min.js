!function(){var a,s,n,i,e,_,o,r,c,u,t="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,t=t||f||Function("return this")(),f="object"==typeof exports&&exports&&!exports.nodeType&&exports,p=f&&"object"==typeof module&&module&&!module.nodeType&&module,l=t.nx=t.nx||{BREAKER:{},NIL:{},VERSION:"1.1.11",DEBUG:!1,GLOBAL:t};function h(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function d(t){return t.replace(e,".$1").replace(_,a).replace(o,"")}function y(){}function m(t,e){this.type=t,this.meta=e,this.base=e.extends||l.RootClass,this.$base=this.base.prototype,this.__class_meta__={},this.__class__=null,this.__constructor__=null}"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.nx=l,define(function(){return l})):p?((p.exports=l).nx=l,f.nx=l):t.nx=l,a=".",s="undefined",n=Array.prototype,i=Object.prototype.hasOwnProperty,e=/\[(\w+)\]/g,_=/[.]+/g,o=/^\.|\.$/g,l.noop=function(){},l.stubTrue=function(){return!0},l.stubFalse=function(){return!1},l.stubValue=function(t){return t},l.stubPromise=function(t){return Promise.resolve(t)},l.error=function(t){throw new Error(t)},l.try=function(t,e){e=e||l.noop;try{t()}catch(t){e(t)}},l.forEach=function(t,e,_){for(var n=t.length,s=0;s<n&&e.call(_,t[s],s,t)!==l.BREAKER;s++);},l.forIn=function(t,e,_){for(var n in t)if(i.call(t,n)&&e.call(_,n,t[n],t)===l.BREAKER)break},l.each=function(n,s,o){function t(t,e,_){return s.call(o,t,e,n,_)===l.BREAKER}var e,_;if(n)if("number"==typeof(_=n.length))for(e=0;e<_&&!t(e,n[e],!0);e++);else for(e in n)if(i.call(n,e)&&t(e,n[e],!1))break},l.map=function(t,e,_){var n=[];return l.each(t,function(){var t=e.apply(_,arguments);if(t===l.BREAKER)return l.BREAKER;n.push(t)}),n},l.mix=function(t){for(var _=t||{},e=arguments,n=1,s=e.length;n<s;n++)l.forIn(e[n],function(t,e){_[t]=e});return _},l.slice=function(t,e,_){return n.slice.call(t,e,_)},l.set=function(t,e,_){for(var n=d(e).split(a),s=t||l.GLOBAL,o=n.length-1,e=n[o],i=0;i<o;i++)var r=n[i],c=isNaN(+n[i+1])?{}:[],s=s[r]=s[r]||c;return s[e]=_,t},l.get=function(t,e,_){var n;return e?(e=d(e).split(a),n=t||l.GLOBAL,e.forEach(function(t){n=n&&n[t]}),typeof _!=s&&typeof n==s?_:n):t},l.del=function(t,e){for(var _=d(e).split(a),n=0;n<_.length;n++){var s=_[n];if(n===_.length-1)return delete t[s],!0;t=t[s]}return!1},l.path=function(t,e,_){return null==_?this.get(t,e):this.set(t,e,_)},l.to=function(t){return t.then(function(t){return[void 0,t]}).catch(function(t){return[t]})},l.createOverload=function(){var n={};function t(){var t=Array.prototype.slice.call(arguments),e=t.map(h).join(),_=n[e];if(_)return _.apply(this,t);throw new Error("No matching function, parameter type: ["+e+"]")}return t.add=t=>{var e=t.args,t=t.fn,e=e.join();if("function"!=typeof t)throw new Error("The fn must be a function");n[e]=t},t},p={__class_id__:0,__type__:"nx.RootClass",__base__:Object,__meta__:{},__static__:!1,__statics__:{},__properties__:{},__methods__:{},__method_init__:l.noop,__static_init__:l.noop},f={base:function(){var t=this.base.caller;if(t&&(t=t.__base__))return t.apply(this,arguments)},parent:function(t){var e=void 0===this.__id__,_=l.slice(arguments,1),n=e?this.__base__:this.__base__.prototype,e=this["@"+t].__type__,s=["get","set"][_.length];switch(e){case"method":return n[t].apply(this,_);case"property":return n["@"+t][s].apply(this,_)}}},p.__methods__=y.prototype=l.mix({constructor:y,init:l.noop,destroy:l.noop,toString:function(){return"[Class@"+this.__type__+"]"}},f),l.mix(p.__statics__,f),l.mix(y,p),l.mix(y,p.__statics__),l.RootClass=y,l.defineProperty=function(t,e,_,n){var s,o,i,r="@"+e,c=_&&"object"==typeof _?_:{value:_},c="value"in c?(o=c.value,i="_"+e,s=function(){return i in this?this[i]:"function"==typeof o?o.call(this):o},function(t){this[i]=t}):(s=_.get||t[r]&&t[r].get||l.noop,_.set||t[r]&&t[r].set||l.noop);return r in t&&(s.__base__=t[r].get,c.__base__=t[r].set),r=t[r]={__meta__:_,__name__:e,__type__:"property",__static__:!!n,get:s,set:c,configurable:!0},Object.defineProperty(t,e,r),r},l.defineMethod=function(t,e,_,n){var s="@"+e;return t[e]=_,t[s]={__meta__:_,__name__:e,__type__:"method",__static__:!!n}},l.defineBombMethod=function(_,t,n,s){t.split(",").forEach(function(t,e){l.defineMethod(_,t,n.call(_,t,e),s)})},l.defineMembers=function(_,n,t,s){l.forIn(t,function(t,e){-1<t.indexOf(",")?l.defineBombMethod(n,t,e,s):l["define"+_](n,t,e,s)})},r=1,c=0,u="nx.Anonymous",m.prototype={constructor:m,initMetaProcessor:function(){var t=this.meta,e=t.methods||{},_=t.statics||{};l.mix(this.__class_meta__,{__type__:this.type,__meta__:t,__base__:this.base,__class_id__:r++,__method_init__:e.init||this.base.__method_init__,__static_init__:_.init||this.base.__static_init__,__static__:!t.methods&&!!t.statics})},createClassProcessor:function(){var t=this;this.__class__=function(){this.__id__=c++,t.__constructor__.apply(this,arguments),t.registerDebug(this)}},inheritProcessor:function(){var t=this.__class_meta__;this.inheritedClass(t),this.defineMethods(t,!0),this.defineMethods(t,!1),this.defineProperties(t)},inheritedClass:function(t){function e(){}var _=this.__class__;e.prototype=this.$base,_.prototype=new e,_.prototype.$base=this.$base,_.prototype.constructor=_},defineMethods:function(t,e){var _=e?"statics":"methods",n="__"+_+"__",s=e?this.__class__:this.__class__.prototype,o=(e?this.base:this.base.prototype)[n]||{};l.forIn(this.meta[_],function(t,e){o[t]&&"function"==typeof e&&(e.__base__=o[t])}),s[n]=l.mix(t[n],o,this.meta[_]),l.defineMembers("Method",s,s[n],e)},defineProperties:function(t){var e=t.__static__,_=e?this.__class__:this.__class__.prototype,n=e?this.base:this.base.prototype;_.__properties__=l.mix(null,n.__properties__,t.__properties__,this.meta.properties),l.defineMembers("Property",_,_.__properties__,e)},methodsConstructorProcessor:function(){var t=this.__class_meta__;this.__constructor__=function(){t.__method_init__.apply(this,arguments)}},staticsConstructorProcessor:function(){this.__class_meta__.__static_init__.call(this.__class__)},registerProcessor:function(){var t=this.__class__,e=this.type,_=this.__class_meta__;l.mix(t.prototype,_),l.mix(t,_),-1===e.indexOf(u)&&l.set(l.GLOBAL,e,t)},registerDebug:function(t){l.DEBUG&&(l.set(l,"__instances__."+(c-1),t),l.set(l,"__instances__.length",c))}},l.declare=function(t,e){e=new m("string"==typeof t?t:u+r,e||t);return e.initMetaProcessor(),e.createClassProcessor(),e.inheritProcessor(),e.methodsConstructorProcessor(),e.staticsConstructorProcessor(),e.registerProcessor(),e.__class__}}.call(this);